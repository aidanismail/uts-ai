<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fuzzy Dokter Scheduler</title>
    <style>
      body { font-family: Arial; padding: 20px; background: #f7f7f7; }
      table { border-collapse: collapse; margin-bottom: 50px; }
  
      .table-penjadwalan {
    width: 80%;
    margin-left: 0;
    margin-right: auto;
    margin-bottom: 30px;
    table-layout: fixed;
}

      .table-distribusi {
    width: 80%;
    table-layout: fixed;
}
  
      th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
      th { background-color: #eee; }
      h2 { margin-top: 40px; }
  </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <h1>Fuzzy Dokter Scheduler</h1>

    <!-- Dropdown untuk pilih tanggal -->
    <label for="tanggalSelect"><strong>Pilih Tanggal:</strong></label>
    <select id="tanggalSelect" onchange="filterTanggal()">
        {% for tanggal in hasil.keys() %}
            <option value="{{ tanggal }}">{{ tanggal }}</option>
        {% endfor %}
    </select>

    <!-- Semua hasil disimpan tapi disembunyikan berdasarkan pilihan -->
    {% for tanggal, data in hasil.items() %}
    <div class="tanggal-block" id="block-{{ tanggal }}" style="display: none;">
        <h2>Hasil untuk Tanggal: {{ tanggal }}</h2>

        <!-- Tabel Fuzzy Penjadwalan -->
        <table class="table-penjadwalan">
            <thead>
                <tr>
                    <th>RS</th>
                    <th>Pasien</th>
                    <th>Jumlah Dokter Awal</th>
                    <th>Rasio</th>
                    <th>Under</th>
                    <th>Normal</th>
                    <th>Over</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data.jadwal %}
                <tr>
                    <td>{{ row['RS'] }}</td>
                    <td>{{ row['Pasien'] }}</td>
                    <td>{{ row['Jumlah Dokter Awal'] }}</td>
                    <td>{{ row['Rasio'] }}</td>
                    <td>{{ row['Under'] }}</td>
                    <td>{{ row['Normal'] }}</td>
                    <td>{{ row['Over'] }}</td>
                    <td>{{ row['Aksi'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Tabel Distribusi Dokter Akhir -->
        <h4>Distribusi Dokter per RS (Setelah Reposisi)</h4>
        <table class="table-distribusi">
            <thead>
                <tr>
                    <th>RS</th>
                    <th>Dokter</th>
                    <th>Jumlah Dokter</th>
                    <th>Rasio Baru</th>
                </tr>
            </thead>
            <tbody>
                {% for info in data.jadwal %}
                <tr>
                    <td>{{ info['RS'] }}</td>
                    <td>{{ info['Dokter'] }}</td>
                    <td>{{ info['Jumlah Dokter'] }}</td>
                    <td>{{ info['Rasio Baru'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <hr>
    </div>
    {% endfor %}

    <script>
        function filterTanggal() {
            const selectedTanggal = document.getElementById("tanggalSelect").value;
            const blocks = document.querySelectorAll(".tanggal-block");

            blocks.forEach(block => {
                block.style.display = "none";
            });

            const selectedBlock = document.getElementById("block-" + selectedTanggal);
            if (selectedBlock) {
                selectedBlock.style.display = "block";
            }
        }

        // Default tampilkan tanggal pertama
        window.onload = function() {
            document.getElementById("tanggalSelect").selectedIndex = 0;
            filterTanggal();
        }
    </script>
</body>
</html>
